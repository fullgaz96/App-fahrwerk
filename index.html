<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Mini Fahrwerkslager Demo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: -apple-system, sans-serif; background:#121212; color:#f0f0f0; padding:20px;}
h1{color:#3a85ff;}
input,select{width:100%;padding:8px;margin:5px 0;background:#2d2d2d;color:#f0f0f0;border:1px solid #444;border-radius:6px;}
button{padding:10px;margin:5px 0;border:none;border-radius:6px;background:#3a85ff;color:white;cursor:pointer;width:100%;}
</style>
</head>
<body>
<h1>Mini Fahrwerkslager Demo</h1>

<label>Motorrad</label>
<select id="motorrad">
  <option value="GSXR">GSXR</option>
  <option value="GS500E">GS500E</option>
  <option value="SV650">SV650</option>
</select>

<label>GabelhÃ¶he (mm)</label><input type="number" id="gabelHoehe">
<label>SAG vorne statisch (mm)</label><input type="number" id="sagVStatisch">
<label>SAG vorne dynamisch (mm)</label><input type="number" id="sagVDynamisch">
<label>Federrate vorne (N/mm)</label><input type="number" id="federV" step="0.1">
<label>HeckhÃ¶he (mm)</label><input type="number" id="heckhoehe">
<label>SAG hinten statisch (mm)</label><input type="number" id="sagHStatisch">
<label>SAG hinten dynamisch (mm)</label><input type="number" id="sagHDynamisch">
<label>Federrate hinten (N/mm)</label><input type="number" id="federH" step="0.1">

<input type="file" id="loadFile" accept=".json">
<button onclick="loadFahrwerk()">ðŸš€ Laden</button>
<button onclick="saveFahrwerk()">ðŸ’¾ Speichern</button>

<script>
let fahrwerkslager = [];

function loadFahrwerk() {
  const file = document.getElementById("loadFile").files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = e => {
    fahrwerkslager = JSON.parse(e.target.result);
    autofill();
  };
  reader.readAsText(file);
}

function autofill(){
  const moto = document.getElementById("motorrad").value;
  const entry = fahrwerkslager.find(f => f.motorrad===moto);
  if(entry){
    ["gabelHoehe","sagVStatisch","sagVDynamisch","federV","heckhoehe","sagHStatisch","sagHDynamisch","federH"].forEach(id=>{
      document.getElementById(id).value = entry[id];
    });
  }
}

document.getElementById("motorrad").addEventListener("change", autofill);

function saveFahrwerk(){
  const moto = document.getElementById("motorrad").value;
  let entry = fahrwerkslager.find(f => f.motorrad===moto);
  if(!entry){
    entry = {motorrad:moto, setup:"Standard"};
    fahrwerkslager.push(entry);
  }
  ["gabelHoehe","sagVStatisch","sagVDynamisch","federV","heckhoehe","sagHStatisch","sagHDynamisch","federH"].forEach(id=>{
    entry[id] = Number(document.getElementById(id).value);
  });
  const blob = new Blob([JSON.stringify(fahrwerkslager,null,2)],{type:"application/json"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "fahrwerkslager.json";
  a.click();
}
</script>
</body>
</html>
